{"remainingRequest":"/home/quantium/labs/solana-nft-python/nft-armory/node_modules/vue-loader-v16/dist/index.js??ref--1-1!/home/quantium/labs/solana-nft-python/nft-armory/src/components/IWantUrNFTForm.vue?vue&type=style&index=0&id=7084e25a&scoped=true&lang=css","dependencies":[{"path":"/home/quantium/labs/solana-nft-python/nft-armory/src/components/IWantUrNFTForm.vue","mtime":1666703689729},{"path":"/home/quantium/labs/solana-nft-python/nft-armory/node_modules/css-loader/dist/cjs.js","mtime":1666703776180},{"path":"/home/quantium/labs/solana-nft-python/nft-armory/node_modules/vue-loader-v16/dist/stylePostLoader.js","mtime":1666703777264},{"path":"/home/quantium/labs/solana-nft-python/nft-armory/node_modules/postcss-loader/src/index.js","mtime":1666703776480},{"path":"/home/quantium/labs/solana-nft-python/nft-armory/node_modules/cache-loader/dist/cjs.js","mtime":1666703775764},{"path":"/home/quantium/labs/solana-nft-python/nft-armory/node_modules/vue-loader-v16/dist/index.js","mtime":1666703776480}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ci5kaXNwbGF5IHsKICBAYXBwbHkgdGV4dC1jZW50ZXIgZmxleCBmbGV4LWNvbCBqdXN0aWZ5LWNlbnRlciBhbGlnbi1taWRkbGUgbWwtMTAgbXQtMjsKICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2IoMzAsIDI1NSwgMCk7CiAgd2lkdGg6IDI1MHB4OwogIGhlaWdodDogMjUwcHg7Cn0K"},{"version":3,"sources":["/home/quantium/labs/solana-nft-python/nft-armory/src/components/IWantUrNFTForm.vue"],"names":[],"mappings":";AAuLA,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;EACP,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;EACvE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC;EACjC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;EACZ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;AACf","file":"/home/quantium/labs/solana-nft-python/nft-armory/src/components/IWantUrNFTForm.vue","sourceRoot":"","sourcesContent":["<template>\n  <div>\n    <div>\n      Ever wanted to buy an NFT off someone but didn't know who they were / how to contact them?\n      Send them an NFT with your contact details - maybe they'll reach out Â¯\\_(ãƒ„)_/Â¯\n    </div>\n\n    <div class=\"mt-10\">\n      <a href=\"#\" class=\"nes-text is-primary\" @click=\"showModal('tooltipWant')\"\n        >How does it work?\n      </a>\n    </div>\n\n    <div class=\"flex mt-10\">\n      <form @submit.prevent=\"mintNewMaster\" class=\"flex-grow\">\n        <div><label for=\"nftName\">NFT name:</label></div>\n        <div><input type=\"text\" id=\"nftName\" class=\"nes-input\" v-model=\"nftName\" /></div>\n\n        <div><label for=\"contactDets\" class=\"mt-5\">Contact Details:</label></div>\n        <div><input type=\"text\" id=\"contactDets\" class=\"nes-input\" v-model=\"contactDets\" /></div>\n\n        <div><label for=\"textSize\" class=\"mt-5\">Text Size:</label></div>\n        <div><input type=\"number\" id=\"textSize\" class=\"nes-input\" v-model=\"textSize\" /></div>\n\n        <button\n          class=\"nes-btn is-primary mt-5\"\n          :class=\"{ 'is-disabled': isLoading || !isConnected }\"\n          :disabled=\"isLoading || !isConnected\"\n          type=\"submit\"\n        >\n          Mint NFT\n        </button>\n      </form>\n\n      <div class=\"display\" id=\"canvas\" :style=\"{ fontSize: `${textSize}px` }\">\n        <p>I want ur {{ nftName }} NFT.</p>\n        <p class=\"mt-2\">Hmu {{ contactDets }}</p>\n      </div>\n    </div>\n\n    <!--notifications-->\n    <StdNotifications :is-connected=\"isConnected\" :is-loading=\"isLoading\" :error=\"error\" />\n    <NotifySuccess v-if=\"mintResult\" class=\"mt-5\">\n      <p>Mint successful! ðŸŽ‰</p>\n      <LoadingIcon align=\"left\" class=\"mt-5\" v-if=\"!newNFT\"\n        >Loading your new NFT... (might take a min or two)</LoadingIcon\n      >\n      <div v-else>\n        <ExplorerLink :tx-id=\"mintResult.txId\" />\n        <NFTViewCard :n=\"newNFT\" class=\"text-black\" />\n      </div>\n    </NotifySuccess>\n\n    <!--modals-->\n    <ModalWindow\n      v-if=\"isModalVisible('tooltipWant')\"\n      title=\"How does it work?\"\n      @hide-modal=\"hideModal('tooltipWant')\"\n    >\n      <ContentTooltipIWantUrNFT />\n    </ModalWindow>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, ref } from 'vue';\nimport html2canvas from 'html2canvas';\n// @ts-ignore\nimport { PublicKey } from '@solana/web3.js';\nimport usePinata from '@/composables/pinata';\nimport useWallet from '@/composables/wallet';\nimport useError from '@/composables/error';\nimport { IMintResult, INFT } from '@/common/helpers/types';\nimport StdNotifications from '@/components/StdNotifications.vue';\nimport NotifySuccess from '@/components/notifications/NotifySuccess.vue';\nimport LoadingIcon from '@/components/LoadingIcon.vue';\nimport ExplorerLink from '@/components/ExplorerLink.vue';\nimport NFTViewCard from '@/components/NFTViewCard.vue';\nimport ModalWindow from '@/components/ModalWindow.vue';\nimport ContentTooltipIWantUrNFT from '@/components/content/tooltip/ContentTooltipIWantUrNFT.vue';\nimport useModal from '@/composables/modal';\nimport { NFTMintMaster } from '@/common/NFTmint';\nimport { NFTGet } from '@/common/NFTget';\n\nexport default defineComponent({\n  components: {\n    ContentTooltipIWantUrNFT,\n    ModalWindow,\n    NFTViewCard,\n    ExplorerLink,\n    LoadingIcon,\n    NotifySuccess,\n    StdNotifications,\n  },\n  setup() {\n    const { isConnected, getWallet, getWalletAddress } = useWallet();\n    const { error, clearError, setError } = useError();\n\n    const isLoading = ref<boolean>(false);\n    const mintResult = ref<IMintResult | null>(null);\n    const newNFT = ref<INFT | null>(null);\n\n    const clearPreviousResults = () => {\n      isLoading.value = false;\n      mintResult.value = null;\n      newNFT.value = null;\n      clearError();\n    };\n\n    const fetchNewNFT = async () => {\n      // this will keep failing, while the network updates, for a while so keep retrying\n      try {\n        [newNFT.value] = await NFTGet({ mint: new PublicKey(mintResult.value!.mint) });\n      } catch (e) {\n        await fetchNewNFT();\n      }\n    };\n\n    // --------------------------------------- prep metadata\n    const nftName = ref('SMB #1355');\n    const contactDets = ref('on twitter: @myname');\n    const textSize = ref(23);\n\n    const { uploadImg, uploadJSON, hashToURI } = usePinata();\n\n    const generateImg = async () => {\n      const canvas = await html2canvas(document.getElementById('canvas')!);\n      const img = canvas.toDataURL('image/png');\n      const res = await fetch(img);\n      return res.blob();\n    };\n\n    const prepareMetadata = async () => {\n      const img = await generateImg();\n      const imgHash = await uploadImg(img, getWalletAddress()!);\n      const jsonHash = await uploadJSON(imgHash, getWalletAddress()!);\n      return hashToURI(jsonHash);\n    };\n\n    // --------------------------------------- mint newe nft\n    const mintNewMaster = async () => {\n      clearPreviousResults();\n      isLoading.value = true;\n\n      const uri = await prepareMetadata();\n\n      NFTMintMaster(getWallet() as any, uri, 0)\n        .then(async (result) => {\n          mintResult.value = result as IMintResult;\n          isLoading.value = false;\n          await fetchNewNFT();\n        })\n        .catch((e) => {\n          setError(e);\n          isLoading.value = false;\n        });\n    };\n\n    // --------------------------------------- modals\n    const { registerModal, isModalVisible, showModal, hideModal } = useModal();\n    registerModal('tooltipWant');\n\n    return {\n      isConnected,\n      isLoading,\n      mintResult,\n      newNFT,\n      // prep\n      nftName,\n      contactDets,\n      textSize,\n      // mint\n      mintNewMaster,\n      // modals\n      isModalVisible,\n      showModal,\n      hideModal,\n    };\n  },\n});\n</script>\n\n<style scoped>\n.display {\n  @apply text-center flex flex-col justify-center align-middle ml-10 mt-2;\n  background-color: rgb(30, 255, 0);\n  width: 250px;\n  height: 250px;\n}\n</style>\n"]}]}